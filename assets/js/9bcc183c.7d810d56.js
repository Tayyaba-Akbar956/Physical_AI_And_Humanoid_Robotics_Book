"use strict";(globalThis.webpackChunkphysical_ai_robotics_book=globalThis.webpackChunkphysical_ai_robotics_book||[]).push([[301],{786:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"appendix-b-setup/ros2-setup","title":"ROS 2 Setup","description":"This chapter provides detailed instructions for configuring ROS 2 specifically for Physical AI and humanoid robotics applications. Proper ROS 2 configuration is essential for effective robotics development and will be used throughout this textbook.","source":"@site/docs/appendix-b-setup/02-ros2-setup.md","sourceDirName":"appendix-b-setup","slug":"/appendix-b-setup/ros2-setup","permalink":"/docs/appendix-b-setup/ros2-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/Tayyaba-Akbar956/Physical_AI_And_Humanoid_Robotics_Book/tree/main/docs/appendix-b-setup/02-ros2-setup.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"ROS 2 Setup"},"sidebar":"tutorialSidebar","previous":{"title":"Software Installation","permalink":"/docs/appendix-b-setup/software-installation"},"next":{"title":"Gazebo Setup","permalink":"/docs/appendix-b-setup/gazebo-setup"}}');var r=i(4848),o=i(8453);const t={sidebar_position:2,title:"ROS 2 Setup"},a="ROS 2 Setup for Physical AI Development",l={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction: Why ROS 2 Configuration Matters",id:"introduction-why-ros-2-configuration-matters",level:2},{value:"ROS 2 Environment Configuration",id:"ros-2-environment-configuration",level:2},{value:"Setting Up the ROS 2 Environment",id:"setting-up-the-ros-2-environment",level:3},{value:"Understanding RMW Implementations",id:"understanding-rmw-implementations",level:3},{value:"Configuring Domain ID",id:"configuring-domain-id",level:3},{value:"Creating a Robotics Development Workspace",id:"creating-a-robotics-development-workspace",level:2},{value:"Workspace Structure for Physical AI",id:"workspace-structure-for-physical-ai",level:3},{value:"Creating the Workspace",id:"creating-the-workspace",level:3},{value:"Adding Environment Configuration",id:"adding-environment-configuration",level:3},{value:"ROS 2 Quality of Service (QoS) Configuration",id:"ros-2-quality-of-service-qos-configuration",level:2},{value:"Understanding QoS Settings",id:"understanding-qos-settings",level:3},{value:"Recommended QoS for Different Message Types",id:"recommended-qos-for-different-message-types",level:3},{value:"Using QoS in Code",id:"using-qos-in-code",level:3},{value:"ROS 2 Parameters Configuration",id:"ros-2-parameters-configuration",level:2},{value:"Setting Parameters for Physical AI",id:"setting-parameters-for-physical-ai",level:3},{value:"Parameter Validation",id:"parameter-validation",level:3},{value:"ROS 2 Launch Files Configuration",id:"ros-2-launch-files-configuration",level:2},{value:"Basic Launch File Structure",id:"basic-launch-file-structure",level:3},{value:"Multi-Robot Configuration",id:"multi-robot-configuration",level:2},{value:"Network Configuration",id:"network-configuration",level:3},{value:"Domain ID Management",id:"domain-id-management",level:3},{value:"Performance Optimization Settings",id:"performance-optimization-settings",level:2},{value:"DDS Configuration for Performance",id:"dds-configuration-for-performance",level:3},{value:"Real-time Configuration (Optional)",id:"real-time-configuration-optional",level:3},{value:"Testing ROS 2 Configuration",id:"testing-ros-2-configuration",level:2},{value:"Basic Functionality Test",id:"basic-functionality-test",level:3},{value:"Network Test",id:"network-test",level:3},{value:"Performance Test",id:"performance-test",level:3},{value:"Troubleshooting Common ROS 2 Configuration Issues",id:"troubleshooting-common-ros-2-configuration-issues",level:2},{value:"Issue 1: Nodes Can&#39;t Communicate",id:"issue-1-nodes-cant-communicate",level:3},{value:"Issue 2: High Latency or Packet Loss",id:"issue-2-high-latency-or-packet-loss",level:3},{value:"Issue 3: Parameter Service Unavailable",id:"issue-3-parameter-service-unavailable",level:3},{value:"Issue 4: Memory Issues with Large Messages",id:"issue-4-memory-issues-with-large-messages",level:3},{value:"Security Configuration (Advanced)",id:"security-configuration-advanced",level:2},{value:"ROS 2 Security Features",id:"ros-2-security-features",level:3},{value:"Environment Variables for Security",id:"environment-variables-for-security",level:3},{value:"Performance Monitoring",id:"performance-monitoring",level:2},{value:"Tools for Monitoring ROS 2 Performance",id:"tools-for-monitoring-ros-2-performance",level:3},{value:"Containerized ROS 2 Setup (Docker)",id:"containerized-ros-2-setup-docker",level:2},{value:"Dockerfile for Physical AI Development",id:"dockerfile-for-physical-ai-development",level:3},{value:"Running ROS 2 in Docker with GUI",id:"running-ros-2-in-docker-with-gui",level:3},{value:"Best Practices Summary",id:"best-practices-summary",level:2},{value:"Configuration Best Practices",id:"configuration-best-practices",level:3},{value:"Performance Best Practices",id:"performance-best-practices",level:3},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Further Reading",id:"further-reading",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"ros-2-setup-for-physical-ai-development",children:"ROS 2 Setup for Physical AI Development"})}),"\n",(0,r.jsx)(n.p,{children:"This chapter provides detailed instructions for configuring ROS 2 specifically for Physical AI and humanoid robotics applications. Proper ROS 2 configuration is essential for effective robotics development and will be used throughout this textbook."}),"\n",(0,r.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Configure ROS 2 environment for optimal robotics development"}),"\n",(0,r.jsx)(n.li,{children:"Set up ROS 2 workspaces and packages for robotics projects"}),"\n",(0,r.jsx)(n.li,{children:"Configure ROS 2 for multi-robot simulation and control"}),"\n",(0,r.jsx)(n.li,{children:"Understand ROS 2 networking and performance considerations"}),"\n",(0,r.jsx)(n.li,{children:"Implement ROS 2 best practices for Physical AI applications"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"introduction-why-ros-2-configuration-matters",children:"Introduction: Why ROS 2 Configuration Matters"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 (Robot Operating System 2) is the communication middleware that connects all components of a robotic system. Proper configuration affects:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance"}),": How quickly messages pass between components"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reliability"}),": How robustly the system handles communication failures"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Scalability"}),": How well the system handles multiple robots or complex systems"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Security"}),": How protected the system is from unauthorized access"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Real-time behavior"}),": How predictable the system is for time-critical operations"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"For Physical AI, ROS 2 configuration becomes particularly important because physical robots must operate in real-time with strict timing requirements and safety considerations."}),"\n",(0,r.jsx)(n.h2,{id:"ros-2-environment-configuration",children:"ROS 2 Environment Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"setting-up-the-ros-2-environment",children:"Setting Up the ROS 2 Environment"}),"\n",(0,r.jsxs)(n.p,{children:["First, ensure the ROS 2 environment is properly sourced. Add these lines to your ",(0,r.jsx)(n.code,{children:"~/.bashrc"})," if not already there:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Source ROS 2 Humble\nsource /opt/ros/humble/setup.bash\n\n# Source your workspace (assumes you created ~/ros2_ws as in the previous chapter)\nsource ~/ros2_ws/install/setup.bash\n\n# Set ROS 2 environment variables for robotics development\nexport RMW_IMPLEMENTATION=rmw_cyclonedx_cpp\nexport ROS_DOMAIN_ID=42  # Change for multi-robot systems\nexport ROS_LOCALHOST_ONLY=0  # Allow network communication\n"})}),"\n",(0,r.jsx)(n.h3,{id:"understanding-rmw-implementations",children:"Understanding RMW Implementations"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 uses different middleware implementations. For Physical AI applications:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"rmw_cyclonedx_cpp"})," (Default): Good balance of performance and features"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"rmw_fastrtps_cpp"}),": Higher performance for time-critical applications"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"rmw_connextdds"}),": For high-performance applications (requires license)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"To set the implementation:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"export RMW_IMPLEMENTATION=rmw_cyclonedx_cpp\n"})}),"\n",(0,r.jsx)(n.h3,{id:"configuring-domain-id",children:"Configuring Domain ID"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 uses domain IDs to separate different ROS 2 networks:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Default domain (0-255, 0-23 typically used by other applications)\nexport ROS_DOMAIN_ID=42\n\n# For multiple robot systems, use different domains:\n# Robot 1: export ROS_DOMAIN_ID=42\n# Robot 2: export ROS_DOMAIN_ID=43\n# Shared network: export ROS_DOMAIN_ID=44\n"})}),"\n",(0,r.jsx)(n.h2,{id:"creating-a-robotics-development-workspace",children:"Creating a Robotics Development Workspace"}),"\n",(0,r.jsx)(n.h3,{id:"workspace-structure-for-physical-ai",children:"Workspace Structure for Physical AI"}),"\n",(0,r.jsx)(n.p,{children:"For Physical AI projects, we recommend a structured workspace:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"~/physical_ai_ws/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 robot_models/         # URDF models, meshes, Gazebo worlds\n\u2502   \u251c\u2500\u2500 control_packages/     # Controllers and motion planning\n\u2502   \u251c\u2500\u2500 perception_packages/  # Vision, sensors, object detection\n\u2502   \u251c\u2500\u2500 simulation_packages/  # Gazebo plugins, simulation worlds\n\u2502   \u2514\u2500\u2500 application_packages/# High-level behaviors, AI applications\n\u251c\u2500\u2500 install/\n\u251c\u2500\u2500 build/\n\u2514\u2500\u2500 log/\n"})}),"\n",(0,r.jsx)(n.h3,{id:"creating-the-workspace",children:"Creating the Workspace"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Create the workspace\nmkdir -p ~/physical_ai_ws/src\ncd ~/physical_ai_ws\n\n# Create subdirectories for organization\nmkdir -p src/{robot_models,control_packages,perception_packages,simulation_packages,application_packages}\n\n# Initialize the workspace\nsource /opt/ros/humble/setup.bash\ncolcon build --symlink-install\nsource install/setup.bash\n"})}),"\n",(0,r.jsx)(n.h3,{id:"adding-environment-configuration",children:"Adding Environment Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["Add workspace-specific environment variables to ",(0,r.jsx)(n.code,{children:"~/.bashrc"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Physical AI Development Workspace\nexport PHYSICAL_AI_WS=~/physical_ai_ws\nexport GZ_SIM_RESOURCE_PATH=$PHYSICAL_AI_WS/src/robot_models:$GZ_SIM_RESOURCE_PATH\nexport GZ_SIM_SYSTEM_PLUGIN_PATH=$PHYSICAL_AI_WS/install/lib:$GZ_SIM_SYSTEM_PLUGIN_PATH\nexport AMENT_PREFIX_PATH=$PHYSICAL_AI_WS/install:$AMENT_PREFIX_PATH\nexport CMAKE_PREFIX_PATH=$PHYSICAL_AI_WS/install:$CMAKE_PREFIX_PATH\nexport LD_LIBRARY_PATH=$PHYSICAL_AI_WS/install/lib:$LD_LIBRARY_PATH\nexport PATH=$PHYSICAL_AI_WS/install/bin:$PATH\nexport PKG_CONFIG_PATH=$PHYSICAL_AI_WS/install/lib/pkgconfig:$PKG_CONFIG_PATH\nexport PYTHONPATH=$PHYSICAL_AI_WS/install/lib/python3.10/site-packages:$PYTHONPATH\nexport ROS_PACKAGE_PATH=$PHYSICAL_AI_WS/src:$ROS_PACKAGE_PATH\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ros-2-quality-of-service-qos-configuration",children:"ROS 2 Quality of Service (QoS) Configuration"}),"\n",(0,r.jsx)(n.p,{children:"Proper QoS configuration is critical for Physical AI applications, especially for safety and real-time behavior:"}),"\n",(0,r.jsx)(n.h3,{id:"understanding-qos-settings",children:"Understanding QoS Settings"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy.qos as qos\n\n# Reliability: Can messages be dropped?\nreliable = qos.ReliabilityPolicy.RELIABLE          # All messages delivered\nbest_effort = qos.ReliabilityPolicy.BEST_EFFORT    # Try to deliver messages\n\n# Durability: Should messages persist?\nvolatile = qos.DurabilityPolicy.VOLATILE           # Only new subscribers get messages\ntransient_local = qos.DurabilityPolicy.TRANSIENT_LOCAL  # All subscribers get last message\n\n# History: How many messages to keep?\nkeep_last = qos.HistoryPolicy.KEEP_LAST            # Keep N most recent messages\nkeep_all = qos.HistoryPolicy.KEEP_ALL             # Keep all messages\n"})}),"\n",(0,r.jsx)(n.h3,{id:"recommended-qos-for-different-message-types",children:"Recommended QoS for Different Message Types"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# For safety-critical messages (e.g., motor commands)\nsafety_qos = qos.QoSProfile(\n    depth=1,\n    reliability=qos.ReliabilityPolicy.RELIABLE,\n    durability=qos.DurabilityPolicy.VOLATILE,\n    history=qos.HistoryPolicy.KEEP_LAST\n)\n\n# For sensor data (e.g., camera feeds, LiDAR)\nsensor_qos = qos.QoSProfile(\n    depth=5,\n    reliability=qos.ReliabilityPolicy.BEST_EFFORT,\n    durability=qos.DurabilityPolicy.VOLATILE,\n    history=qos.HistoryPolicy.KEEP_LAST\n)\n\n# For configuration parameters\nconfig_qos = qos.QoSProfile(\n    depth=1,\n    reliability=qos.ReliabilityPolicy.RELIABLE,\n    durability=qos.DurabilityPolicy.TRANSIENT_LOCAL,\n    history=qos.HistoryPolicy.KEEP_LAST\n)\n\n# For diagnostics and logging\ndiagnostic_qos = qos.QoSProfile(\n    depth=10,\n    reliability=qos.ReliabilityPolicy.BEST_EFFORT,\n    durability=qos.DurabilityPolicy.VOLATILE,\n    history=qos.HistoryPolicy.KEEP_LAST\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"using-qos-in-code",children:"Using QoS in Code"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"class PhysicalRobotController(Node):\n    def __init__(self):\n        super().__init__('physical_robot_controller')\n        \n        # Publisher with safety-focused QoS\n        self.cmd_vel_publisher = self.create_publisher(\n            Twist,\n            'cmd_vel',\n            safety_qos  # Use the safety-focused QoS profile\n        )\n        \n        # Publisher with sensor-focused QoS\n        self.image_publisher = self.create_publisher(\n            Image,\n            'camera/image_raw',\n            sensor_qos  # Use the sensor-focused QoS profile\n        )\n        \n        # Subscriber for safety-critical commands\n        self.cmd_vel_subscription = self.create_subscription(\n            Twist,\n            'cmd_vel',\n            self.cmd_vel_callback,\n            safety_qos\n        )\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ros-2-parameters-configuration",children:"ROS 2 Parameters Configuration"}),"\n",(0,r.jsx)(n.p,{children:"Parameters allow runtime configuration of robot behavior:"}),"\n",(0,r.jsx)(n.h3,{id:"setting-parameters-for-physical-ai",children:"Setting Parameters for Physical AI"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"class PhysicalController(Node):\n    def __init__(self):\n        super().__init__('physical_controller')\n        \n        # Declare parameters with default values\n        self.declare_parameter('max_linear_velocity', 0.5)  # m/s\n        self.declare_parameter('max_angular_velocity', 1.0) # rad/s\n        self.declare_parameter('safety_distance', 0.5)      # meters\n        self.declare_parameter('control_frequency', 50)     # Hz\n        \n        # Get parameter values\n        self.max_linear_vel = self.get_parameter('max_linear_velocity').value\n        self.max_angular_vel = self.get_parameter('max_angular_velocity').value\n        self.safety_distance = self.get_parameter('safety_distance').value\n        self.control_frequency = self.get_parameter('control_frequency').value\n        \n        # Create timer to run control loop at specified frequency\n        self.control_timer = self.create_timer(\n            1.0 / self.control_frequency,\n            self.control_loop\n        )\n        \n        self.get_logger().info(\n            f'Controller initialized: max_linear_vel={self.max_linear_vel}, '\n            f'max_angular_vel={self.max_angular_vel}, '\n            f'safety_distance={self.safety_distance}, '\n            f'control_frequency={self.control_frequency}'\n        )\n"})}),"\n",(0,r.jsx)(n.h3,{id:"parameter-validation",children:"Parameter Validation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from rclpy.parameter import Parameter\nfrom rcl_interfaces.msg import SetParametersResult\n\nclass ValidatedController(Node):\n    def __init__(self):\n        super().__init__('validated_controller')\n        \n        # Declare parameters with validation\n        self.declare_parameter('max_linear_velocity', 0.5)\n        self.declare_parameter('max_angular_velocity', 1.0)\n        \n        # Add parameter callback to validate changes\n        self.add_on_set_parameters_callback(self.parameter_callback)\n    \n    def parameter_callback(self, params):\n        for param in params:\n            if param.name == 'max_linear_velocity':\n                if param.type_ == Parameter.Type.DOUBLE:\n                    if 0.0 < param.value <= 5.0:\n                        self.get_logger().info(f'Setting max_linear_velocity to {param.value}')\n                        return SetParametersResult(successful=True)\n                    else:\n                        self.get_logger().error(\n                            f'Invalid max_linear_velocity: {param.value}. '\n                            f'Must be between 0.0 and 5.0'\n                        )\n                        return SetParametersResult(successful=False)\n            elif param.name == 'max_angular_velocity':\n                if param.type_ == Parameter.Type.DOUBLE:\n                    if 0.0 < param.value <= 5.0:\n                        self.get_logger().info(f'Setting max_angular_velocity to {param.value}')\n                        return SetParametersResult(successful=True)\n                    else:\n                        self.get_logger().error(\n                            f'Invalid max_angular_velocity: {param.value}. '\n                            f'Must be between 0.0 and 5.0'\n                        )\n                        return SetParametersResult(successful=False)\n        return SetParametersResult(successful=True)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ros-2-launch-files-configuration",children:"ROS 2 Launch Files Configuration"}),"\n",(0,r.jsx)(n.p,{children:"Launch files are used to start multiple nodes together with specific configurations:"}),"\n",(0,r.jsx)(n.h3,{id:"basic-launch-file-structure",children:"Basic Launch File Structure"}),"\n",(0,r.jsxs)(n.p,{children:["Create ",(0,r.jsx)(n.code,{children:"~/physical_ai_ws/src/robot_models/launch/physical_robot.launch.py"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument, IncludeLaunchDescription\nfrom launch.conditions import IfCondition\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\nfrom launch.substitutions import LaunchConfiguration\nfrom launch_ros.actions import Node\nfrom ament_index_python.packages import get_package_share_directory\nimport os\n\ndef generate_launch_description():\n    # Define launch arguments\n    use_sim_time = LaunchConfiguration('use_sim_time')\n    robot_name = LaunchConfiguration('robot_name')\n    \n    # Declare launch arguments\n    declare_use_sim_time = DeclareLaunchArgument(\n        'use_sim_time',\n        default_value='true',\n        description='Use simulation (Gazebo) clock if true'\n    )\n    \n    declare_robot_name = DeclareLaunchArgument(\n        'robot_name',\n        default_value='physical_robot',\n        description='Name of the robot'\n    )\n    \n    # Include Gazebo simulation\n    pkg_gazebo_ros = get_package_share_directory('gazebo_ros')\n    gazebo = IncludeLaunchDescription(\n        PythonLaunchDescriptionSource(\n            os.path.join(pkg_gazebo_ros, 'launch', 'gazebo.launch.py')\n        ),\n        launch_arguments={'verbose': 'false'}.items(),\n        condition=IfCondition(use_sim_time)\n    )\n    \n    # Robot state publisher\n    robot_state_publisher = Node(\n        package='robot_state_publisher',\n        executable='robot_state_publisher',\n        name='robot_state_publisher',\n        output='screen',\n        parameters=[{\n            'use_sim_time': use_sim_time,\n            'robot_description': open(\n                os.path.join(\n                    get_package_share_directory('robot_models'),\n                    'urdf',\n                    'physical_robot.urdf'\n                )\n            ).read()\n        }]\n    )\n    \n    # Joint state publisher (for simulation)\n    joint_state_publisher = Node(\n        package='joint_state_publisher',\n        executable='joint_state_publisher',\n        name='joint_state_publisher',\n        parameters=[{\n            'use_sim_time': use_sim_time\n        }],\n        condition=IfCondition(use_sim_time)\n    )\n    \n    # Physical robot controller\n    robot_controller = Node(\n        package='control_packages',\n        executable='physical_robot_controller',\n        name='physical_robot_controller',\n        parameters=[{\n            'use_sim_time': use_sim_time,\n            'robot_name': robot_name\n        }],\n        output='screen'\n    )\n    \n    # Return the launch description\n    return LaunchDescription([\n        declare_use_sim_time,\n        declare_robot_name,\n        gazebo,\n        robot_state_publisher,\n        joint_state_publisher,\n        robot_controller\n    ])\n"})}),"\n",(0,r.jsx)(n.h2,{id:"multi-robot-configuration",children:"Multi-Robot Configuration"}),"\n",(0,r.jsx)(n.p,{children:"For Physical AI applications involving multiple robots:"}),"\n",(0,r.jsx)(n.h3,{id:"network-configuration",children:"Network Configuration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Create a network configuration file\n# Create ~/physical_ai_ws/config/ros_network.yaml:\nnetwork:\n  ros_domain_id: 42\n  network_interface: eth0  # or wlan0 for wireless\n  multicast_ttl: 32  # Increase for multi-hop networks\n"})}),"\n",(0,r.jsx)(n.h3,{id:"domain-id-management",children:"Domain ID Management"}),"\n",(0,r.jsx)(n.p,{children:"For multi-robot systems, manage domain IDs carefully:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import os\nimport random\n\nclass MultiRobotNode(Node):\n    def __init__(self, robot_name):\n        # Generate or use a specific domain ID\n        domain_id = os.environ.get('ROS_DOMAIN_ID')\n        if not domain_id:\n            # Use robot-specific domain ID\n            robot_hash = hash(robot_name) % 100\n            domain_id = 42 + robot_hash\n            os.environ['ROS_DOMAIN_ID'] = str(domain_id)\n        \n        super().__init__(f'{robot_name}_node')\n        self.get_logger().info(f'Running on ROS_DOMAIN_ID={domain_id}')\n"})}),"\n",(0,r.jsx)(n.h2,{id:"performance-optimization-settings",children:"Performance Optimization Settings"}),"\n",(0,r.jsx)(n.h3,{id:"dds-configuration-for-performance",children:"DDS Configuration for Performance"}),"\n",(0,r.jsxs)(n.p,{children:["Create ",(0,r.jsx)(n.code,{children:"~/physical_ai_ws/config/fastdds_profile.xml"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" encoding="UTF-8" ?>\n<dds>\n    <profiles xmlns="http://www.eprosima.com/XMLSchemas/fastRTPS_Profiles">\n        <transport_descriptors>\n            <transport_descriptor>\n                <transport_id>CustomUdpTransport</transport_id>\n                <type>UDPv4</type>\n                <sendBufferSize>65536</sendBufferSize>\n                <receiveBufferSize>65536</receiveBufferSize>\n            </transport_descriptor>\n        </transport_descriptors>\n\n        <participant profile_name="default_xrce_dds_participant" is_default_profile="true">\n            <rtps>\n                <userTransports>\n                    <transport_id>CustomUdpTransport</transport_id>\n                </userTransports>\n                <useBuiltinTransports>false</useBuiltinTransports>\n                <sendSocketBufferSize>65536</sendSocketBufferSize>\n                <listenSocketBufferSize>65536</listenSocketBufferSize>\n                <builtin>\n                    <discovery_config>\n                        <leaseDuration>\n                            <sec>20</sec>\n                        </leaseDuration>\n                    </discovery_config>\n                </builtin>\n            </rtps>\n        </participant>\n    </profiles>\n</dds>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"real-time-configuration-optional",children:"Real-time Configuration (Optional)"}),"\n",(0,r.jsx)(n.p,{children:"For hard real-time applications:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Install real-time kernel (Ubuntu)\nsudo apt install linux-image-rt-generic\n\n# Add RT permissions to current user\necho "$USER soft rtprio 99" | sudo tee -a /etc/security/limits.conf\necho "$USER hard rtprio 99" | sudo tee -a /etc/security/limits.conf\necho "$USER soft memlock unlimited" | sudo tee -a /etc/security/limits.conf\necho "$USER hard memlock unlimited" | sudo tee -a /etc/security/limits.conf\n'})}),"\n",(0,r.jsx)(n.h2,{id:"testing-ros-2-configuration",children:"Testing ROS 2 Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"basic-functionality-test",children:"Basic Functionality Test"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Test ROS 2 installation\nros2 run demo_nodes_cpp talker\n\n# In another terminal\nros2 run demo_nodes_py listener\n\n# Verify communication\necho "If messages appear in the listener terminal, ROS 2 is working"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"network-test",children:"Network Test"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Test multi-machine communication\n# On machine 1: export ROS_DOMAIN_ID=42; ros2 topic pub /test std_msgs/String \"data: 'Hello from machine 1'\"\n# On machine 2: export ROS_DOMAIN_ID=42; ros2 topic echo /test\n"})}),"\n",(0,r.jsx)(n.h3,{id:"performance-test",children:"Performance Test"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Test message latency\nros2 run demo_nodes_cpp add_two_ints_client_async\n\n# Test QoS settings\nros2 topic echo /chatter sensor_msgs/msg/Image --field data --qos-profile sensor_data\n"})}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting-common-ros-2-configuration-issues",children:"Troubleshooting Common ROS 2 Configuration Issues"}),"\n",(0,r.jsx)(n.h3,{id:"issue-1-nodes-cant-communicate",children:"Issue 1: Nodes Can't Communicate"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Nodes on the same machine can't see each other\n",(0,r.jsx)(n.strong,{children:"Solution"}),": Check domain ID and environment sourcing:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"echo $ROS_DOMAIN_ID\necho $RMW_IMPLEMENTATION\n# Verify both nodes have same values\n"})}),"\n",(0,r.jsx)(n.h3,{id:"issue-2-high-latency-or-packet-loss",children:"Issue 2: High Latency or Packet Loss"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Messages are delayed or lost\n",(0,r.jsx)(n.strong,{children:"Solution"}),": Check network configuration:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Test network performance\nping <target_machine>\n# Check for network congestion\nsudo apt install net-tools\nnetstat -i\n"})}),"\n",(0,r.jsx)(n.h3,{id:"issue-3-parameter-service-unavailable",children:"Issue 3: Parameter Service Unavailable"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Cannot set parameters using ros2 param command\n",(0,r.jsx)(n.strong,{children:"Solution"}),": Ensure parameter services are enabled:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# In your node, ensure you're using the standard node creation\n# Parameters are automatically available in standard ROS 2 nodes\n"})}),"\n",(0,r.jsx)(n.h3,{id:"issue-4-memory-issues-with-large-messages",children:"Issue 4: Memory Issues with Large Messages"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Large messages (like images) cause memory issues\n",(0,r.jsx)(n.strong,{children:"Solution"}),": Adjust QoS settings and use appropriate history depth:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# For large messages, use smaller history depth\nsmall_history_qos = qos.QoSProfile(\n    depth=1,  # Keep only latest message\n    reliability=qos.ReliabilityPolicy.BEST_EFFORT,\n    durability=qos.DurabilityPolicy.VOLATILE,\n    history=qos.HistoryPolicy.KEEP_LAST\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"security-configuration-advanced",children:"Security Configuration (Advanced)"}),"\n",(0,r.jsx)(n.p,{children:"For production Physical AI systems, security is important:"}),"\n",(0,r.jsx)(n.h3,{id:"ros-2-security-features",children:"ROS 2 Security Features"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Generate security files (advanced)\nmkdir -p ~/physical_ai_ws/security\ncd ~/physical_ai_ws/security\n\n# Use ros2 security tools to generate keys and certificates\n# This is for advanced users and production systems\n# ros2 security create_keystore ~/physical_ai_ws/security\n"})}),"\n",(0,r.jsx)(n.h3,{id:"environment-variables-for-security",children:"Environment Variables for Security"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Enable security (requires security files)\nexport ROS_SECURITY_ENABLE=true\nexport ROS_SECURITY_STRATEGY=Enforce\nexport ROS_SECURITY_KEYSTORE=~/physical_ai_ws/security\n"})}),"\n",(0,r.jsx)(n.h2,{id:"performance-monitoring",children:"Performance Monitoring"}),"\n",(0,r.jsx)(n.h3,{id:"tools-for-monitoring-ros-2-performance",children:"Tools for Monitoring ROS 2 Performance"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Monitor topics\nros2 topic list\nros2 topic info /topic_name\n\n# Monitor services\nros2 service list\nros2 service info /service_name\n\n# Monitor nodes\nros2 node list\n\n# Use rqt tools for visual monitoring\nsudo apt install ros-humble-rqt ros-humble-rqt-common-plugins\nrqt\n"})}),"\n",(0,r.jsx)(n.h2,{id:"containerized-ros-2-setup-docker",children:"Containerized ROS 2 Setup (Docker)"}),"\n",(0,r.jsx)(n.p,{children:"For isolated development environments:"}),"\n",(0,r.jsx)(n.h3,{id:"dockerfile-for-physical-ai-development",children:"Dockerfile for Physical AI Development"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:'FROM osrf/ros:humble-desktop-full\n\n# Install additional packages for Physical AI\nRUN apt-get update && apt-get install -y \\\n    python3-pip \\\n    python3-dev \\\n    build-essential \\\n    && rm -rf /var/lib/apt/lists/*\n\n# Install Python dependencies\nRUN pip3 install \\\n    numpy \\\n    matplotlib \\\n    opencv-python \\\n    transforms3d \\\n    pybullet\n\n# Create workspace\nRUN mkdir -p /root/physical_ai_ws/src\nWORKDIR /root/physical_ai_ws\n\n# Source ROS 2 environment\nRUN echo "source /opt/ros/humble/setup.bash" >> /root/.bashrc\nRUN echo "source /root/physical_ai_ws/install/setup.bash" >> /root/.bashrc\n\nCMD ["bash"]\n'})}),"\n",(0,r.jsx)(n.h3,{id:"running-ros-2-in-docker-with-gui",children:"Running ROS 2 in Docker with GUI"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# For Linux with X11\nxhost +local:docker\ndocker run -it \\\n  --env="DISPLAY" \\\n  --env="QT_X11_NO_MITSHM=1" \\\n  --volume="/tmp/.X11-unix:/tmp/.X11-unix:rw" \\\n  --device=/dev/dri:/dev/dri:rw \\\n  --name=ros2_physical_ai \\\n  physical_ai_image:latest\n\n# For Windows with WSL2 and VcXsrv\n# Start VcXsrv with proper settings, then:\ndocker run -it \\\n  --env="DISPLAY=host.docker.internal:0.0" \\\n  physical_ai_image:latest\n'})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices-summary",children:"Best Practices Summary"}),"\n",(0,r.jsx)(n.h3,{id:"configuration-best-practices",children:"Configuration Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Environment Management"}),": Always source your complete environment before running ROS 2"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"QoS Selection"}),": Choose appropriate QoS settings based on message criticality"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameter Validation"}),": Validate parameters to prevent runtime errors"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Domain Isolation"}),": Use different domain IDs for different robot systems"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance Monitoring"}),": Regularly monitor system performance"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Security"}),": Implement security measures for deployed systems"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Documentation"}),": Document all configuration parameters and settings"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"performance-best-practices",children:"Performance Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use Appropriate QoS"}),": Match QoS to message requirements"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Limit Message History"}),": Don't keep unnecessary message history"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monitor Bandwidth"}),": Be aware of network bandwidth requirements"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Optimize Message Size"}),": Reduce message sizes when possible"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use Efficient Data Types"}),": Choose appropriate data types for your needs"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ROS 2 configuration significantly impacts Physical AI system performance"}),"\n",(0,r.jsx)(n.li,{children:"Proper QoS settings are critical for safety and performance"}),"\n",(0,r.jsx)(n.li,{children:"Workspace organization helps manage complex Physical AI projects"}),"\n",(0,r.jsx)(n.li,{children:"Multi-robot systems require careful domain ID management"}),"\n",(0,r.jsx)(n.li,{children:"Performance monitoring is essential for debugging and optimization"}),"\n",(0,r.jsx)(n.li,{children:"Security considerations become important for deployed systems"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'"ROS 2 Design": Understanding the architecture of ROS 2'}),"\n",(0,r.jsx)(n.li,{children:'"Quality of Service in ROS 2": Detailed QoS configuration guide'}),"\n",(0,r.jsx)(n.li,{children:'"ROS 2 Performance Tuning": Optimizing ROS 2 applications'}),"\n",(0,r.jsx)(n.li,{children:'"Multi-Robot Systems with ROS 2": Advanced configuration techniques'}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsx)(n.p,{children:"Continue to Appendix B, Section 3: Gazebo Setup to configure the simulation environment for Physical AI development."})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>a});var s=i(6540);const r={},o=s.createContext(r);function t(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);